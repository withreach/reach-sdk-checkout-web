!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.rch=n():e.rch=n()}(this,function(){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";t.r(n);var r={container:void 0},o={"01":["250px","400px"],"02":["390px","400px"],"03":["500px","600px"],"04":["600px","400px"],"05":["100%","100%"]};function a(e){var n=1===e.length?"0".concat(e):e;return o.hasOwnProperty(n)?n:"01"}var i={createIframe:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"0",a=arguments.length>4?arguments[4]:void 0;if(!n||0===n.length)throw new Error("Name parameter missing for iframe");e instanceof HTMLElement?r.container=e:r.container=document.body;var i=document.createElement("iframe");i.classList.add(n+"Class"),i.width=t,i.height=o,i.name=n,i.setAttribute("frameborder","0"),i.setAttribute("border","0");var l=document.createTextNode("<p>Your browser does not support iframes.</p>");return i.appendChild(l),r.container.appendChild(i),function(e,n){e.attachEvent?e.attachEvent("onload",function(){n&&"function"==typeof n&&n(e.contentWindow)}):e.onload=function(){n&&"function"==typeof n&&n(e.contentWindow)}}(i,a),i},createForm:function(e,n,t,r,o){if(!(e&&n&&t&&r&&o))throw new Error("Not all required parameters provided for form creation");if(0===e.length||0===n.length||0===t.length||0===r.length||0===o.length)throw new Error("Not all required parameters have suitable values");var a=document.createElement("form");a.style.display="none",a.name=e,a.action=n,a.method="POST",a.target=t;var i=document.createElement("input");return i.name=r,i.value=o,a.appendChild(i),a},getBrowserInfo:function(){var e=window&&window.screen?window.screen.width:"",n=window&&window.screen?window.screen.height:"",t=window&&window.screen?window.screen.colorDepth:"",r=window&&window.navigator?window.navigator.userAgent:"",o=!(!window||!window.navigator)&&navigator.javaEnabled(),a="";return window&&window.navigator&&(a=window.navigator.language?window.navigator.language:window.navigator.browserLanguage),{screenWidth:e,screenHeight:n,colorDepth:t,userAgent:r,timeZoneOffset:(new Date).getTimezoneOffset(),language:a,javaEnabled:o}},base64Url:{encode:function(e){var n=window.btoa(e).split("=")[0];return n=(n=n.replace("/+/g","-")).replace("///g","_")},decode:function(e){var n=e;switch((n=(n=n.replace("/-/g","+")).replace("/_/g","/")).length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:window.console&&window.console.log&&window.console.log("### base64url::decodeBase64URL::  Illegal base64url string!")}try{return window.atob(n)}catch(e){throw new Error(e)}}},config:{challengeWindowSizes:o,validateChallengeWindowSize:a,getChallengeWindowSize:function(e){return o[a(e)]},THREEDS_METHOD_TIMEOUT:1e4,CHALLENGE_TIMEOUT:6e5}},l=l||{};l.detail=l.detail||{},l.detail.getUrlOrigin=function(e){var n=e.split("/");return n.length<3?"":n[0]+"//"+n[2]},l.detail.createForm=function(e,n,t,r){if(!(e&&n&&t&&r))throw new Error("Not all required parameters provided for form creation");if(0===e.length||0===n.length||0===t.length)throw new Error("Not all required parameters have suitable values");var o=document.createElement("form");for(var a in o.style.display="none",o.name=e,o.action=n,o.method="POST",o.target=t,r){var i=document.createElement("input");i.name=a,i.value=r[a],o.appendChild(i)}return o},l.challenge=function(e,n,t,r){var o=i.getBrowserInfo();console.log(o);var a={challengeWindowSize:i.config.validateChallengeWindowSize(n),screenWidth:o.screenWidth,screenHeight:o.screenHeight,colorDepth:o.colorDepth,userAgent:o.userAgent,tz:o.timeZoneOffset,language:o.language,javaEnabled:o.javaEnabled},d=i.createIframe(t,"threedsIframe"),c=l.detail.createForm("threedsMethodForm",e,"threedsIframe",a);t.appendChild(c);window.addEventListener("message",function n(o){if(o.origin==l.detail.getUrlOrigin(e))if(console.log("Received message:",o.data),o.data.challengeWindowSize){var a=i.config.validateChallengeWindowSize(o.data.challengeWindowSize),u=i.config.getChallengeWindowSize(a);d.width=u[0],d.height=u[1]}else o.data.result&&(window.removeEventListener("message",n),t.removeChild(c),t.removeChild(d),r(o.data.result));else console.log("Ignoring message from",o.origin,"not in same origin as",e)}),c.submit()};n.default=l}]).default});