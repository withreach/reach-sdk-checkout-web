!function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports.rch=t():e.rch=t()}(this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const r={container:void 0};const o={"01":["250px","400px"],"02":["390px","400px"],"03":["500px","600px"],"04":["600px","400px"],"05":["100%","100%"]};function a(e){let t=1===e.length?`0${e}`:e;return o.hasOwnProperty(t)?t:"01"}var i={createIframe:(e,t,n="0",o="0",a)=>{if(!t||0===t.length)throw new Error("Name parameter missing for iframe");e instanceof HTMLElement?r.container=e:r.container=document.body;const i=document.createElement("iframe");i.classList.add(t+"Class"),i.width=n,i.height=o,i.name=t,i.setAttribute("frameborder","0"),i.setAttribute("border","0");const l=document.createTextNode("<p>Your browser does not support iframes.</p>");return i.appendChild(l),r.container.appendChild(i),((e,t)=>{e.attachEvent?e.attachEvent("onload",function(){t&&"function"===typeof t&&t(e.contentWindow)}):e.onload=function(){t&&"function"===typeof t&&t(e.contentWindow)}})(i,a),i},createForm:(e,t,n,r,o)=>{if(!e||!t||!n||!r||!o)throw new Error("Not all required parameters provided for form creation");if(0===e.length||0===t.length||0===n.length||0===r.length||0===o.length)throw new Error("Not all required parameters have suitable values");const a=document.createElement("form");a.style.display="none",a.name=e,a.action=t,a.method="POST",a.target=n;const i=document.createElement("input");return i.name=r,i.value=o,a.appendChild(i),a},getBrowserInfo:()=>{const e=window&&window.screen?window.screen.width:"",t=window&&window.screen?window.screen.height:"",n=window&&window.screen?window.screen.colorDepth:"",r=window&&window.navigator?window.navigator.userAgent:"",o=!(!window||!window.navigator)&&navigator.javaEnabled();let a="";return window&&window.navigator&&(a=window.navigator.language?window.navigator.language:window.navigator.browserLanguage),{screenWidth:e,screenHeight:t,colorDepth:n,userAgent:r,timeZoneOffset:(new Date).getTimezoneOffset(),language:a,javaEnabled:o}},base64Url:{encode:e=>{let t=window.btoa(e).split("=")[0];return t=(t=t.replace("/+/g","-")).replace("///g","_")},decode:e=>{let t=e;switch((t=(t=t.replace("/-/g","+")).replace("/_/g","/")).length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:window.console&&window.console.log&&window.console.log("### base64url::decodeBase64URL::  Illegal base64url string!")}try{return window.atob(t)}catch(n){throw new Error(n)}}},config:{challengeWindowSizes:o,validateChallengeWindowSize:a,getChallengeWindowSize:function(e){return o[a(e)]},THREEDS_METHOD_TIMEOUT:1e4,CHALLENGE_TIMEOUT:6e5}},l=l||{};l.detail=l.detail||{},l.detail.getUrlOrigin=function(e){var t=e.split("/");return t.length<3?"":t[0]+"//"+t[2]},l.detail.createForm=((e,t,n,r)=>{if(!e||!t||!n||!r)throw new Error("Not all required parameters provided for form creation");if(0===e.length||0===t.length||0===n.length)throw new Error("Not all required parameters have suitable values");const o=document.createElement("form");o.style.display="none",o.name=e,o.action=t,o.method="POST",o.target=n;for(const a in r){const e=document.createElement("input");e.name=a,e.value=r[a],o.appendChild(e)}return o}),l.challenge=function(e,t,n,r){const o=i.getBrowserInfo(),a={challengeWindowSize:i.config.validateChallengeWindowSize(t),screenWidth:o.screenWidth,screenHeight:o.screenHeight,colorDepth:o.colorDepth,userAgent:o.userAgent,tz:o.timeZoneOffset,language:o.language,javaEnabled:o.javaEnabled},d=i.createIframe(n,"threedsIframe"),c=l.detail.createForm("threedsMethodForm",e,"threedsIframe",a);n.appendChild(c);const s=function(t){if(t.origin==l.detail.getUrlOrigin(e))if(console.log("Received message:",t.data),t.data.challengeWindowSize){const e=i.config.validateChallengeWindowSize(t.data.challengeWindowSize),n=i.config.getChallengeWindowSize(e);d.width=n[0],d.height=n[1]}else t.data.result&&(window.removeEventListener("message",s),n.removeChild(c),n.removeChild(d),r(t.data.result));else console.log("Ignoring message from",t.origin)};window.addEventListener("message",s),c.submit()};t.default=l}]).default});